<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="概述计算机网络主要由一些通用的、可编程的硬件互连而成，通过这些硬件，可以传送不同类型的数据，并且可以支持广泛和日益增长的应用。计算机网络学习的核心内容就是网络协议的学习。网络协议是为计算机网络中进行数据交换而建立的规则、标准或者说是约定的集合。因为不同用户的数据终端可能采取的字符集是不同的，两者需要进行通信，必须要在一定的标准上进行。 计算机网络的性能指标">
<meta property="og:type" content="article">
<meta property="og:title" content="网络基础">
<meta property="og:url" content="http://yoursite.com/2020/12/21/network/index.html">
<meta property="og:site_name" content="个人成长博客">
<meta property="og:description" content="概述计算机网络主要由一些通用的、可编程的硬件互连而成，通过这些硬件，可以传送不同类型的数据，并且可以支持广泛和日益增长的应用。计算机网络学习的核心内容就是网络协议的学习。网络协议是为计算机网络中进行数据交换而建立的规则、标准或者说是约定的集合。因为不同用户的数据终端可能采取的字符集是不同的，两者需要进行通信，必须要在一定的标准上进行。 计算机网络的性能指标">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCPIP.jpg">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/example.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCPIP2.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCPIPModel.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/clipboard.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/osi.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/xindao.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/zhen.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/2road.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/esc.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/double.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/gx.jpg">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/gx2r.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/jiaoyan.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/jiaoyan4.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/NAT.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/arp.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/RARP.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/arpmodel.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/iphead1.jpg">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/iphead.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/roadmap.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/roadmap1.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/roadmap2.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/roadmap3.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/netroad1.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/netroad2.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/DV.jpg">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/LS.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/ICMP3.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/ICMP.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/ICMP2.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/UDP.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/UDPhead.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/tcp.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/tcp4.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCP11.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/ARQ.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCPwindow.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCPWindow2.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCPM.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCPM2.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCPdu.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCP3h.jpg">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCP3error.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/TCP4Bye.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/network/httprequest.jpg">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/network/httprequest1.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/network/httpresponse.jpg">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/network/httpresponse2.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/HTTPS.png">
<meta property="og:image" content="http://yoursite.com/2020/12/21/network/spdy.png">
<meta property="article:published_time" content="2020-12-21T15:19:08.000Z">
<meta property="article:modified_time" content="2021-02-24T15:23:12.000Z">
<meta property="article:author" content="EvenLjj">
<meta property="article:tag" content="网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/12/21/network/TCPIP.jpg">

<link rel="canonical" href="http://yoursite.com/2020/12/21/network/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>网络基础 | 个人成长博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">个人成长博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">纸上得来终觉浅，绝知此事要躬行</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/21/network/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="EvenLjj">
      <meta itemprop="description" content="记录最近所学所思，让岁月留下汗水的痕迹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人成长博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          网络基础
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-21 23:19:08" itemprop="dateCreated datePublished" datetime="2020-12-21T23:19:08+08:00">2020-12-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-24 23:23:12" itemprop="dateModified" datetime="2021-02-24T23:23:12+08:00">2021-02-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">网络</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>计算机网络主要由一些通用的、可编程的硬件互连而成，通过这些硬件，可以传送不同类型的数据，并且可以支持广泛和日益增长的应用。计算机网络学习的核心内容就是网络协议的学习。网络协议是为计算机网络中进行数据交换而建立的规则、标准或者说是约定的集合。因为不同用户的数据终端可能采取的字符集是不同的，两者需要进行通信，必须要在一定的标准上进行。</p>
<h1 id="计算机网络的性能指标"><a href="#计算机网络的性能指标" class="headerlink" title="计算机网络的性能指标"></a>计算机网络的性能指标</h1><ol>
<li>速率：网络常用单位是Mbps（其中bps=bit/s）。例如100M光纤，100M/s=100Mbps=100Mbit/s=(100/8)MB/s=12.5MB/s</li>
<li>时延：主要有发送时延、传播时延、排队时延以及处理时延组成。发送时延=数据长度（bit）/发送速率（bit/s） ,其中发送速率受限于计算机网卡。传播时延=传播路径距离/传播速率（bit/s），传播速率受限于传播介质。排队时延，数据包在网络设备中等待被处理时间。处理时延，数据包到达设备或者目的机器被处理所需要的时间。总时延=发送时延+传播时延+排队时延+处理时延</li>
<li>RTT：Route-Trip Time，表示的是数据报文在端到端通信中来回一次的时间，是评估网络质量的一项重要指标。通常使用ping命令查看RTT</li>
</ol>
<h1 id="网络层次划分"><a href="#网络层次划分" class="headerlink" title="网络层次划分"></a>网络层次划分</h1><h2 id="OSI开放式互联参考模型"><a href="#OSI开放式互联参考模型" class="headerlink" title="OSI开放式互联参考模型"></a>OSI开放式互联参考模型</h2><p>为了使不同计算机厂家生产的计算机能够相互通信，以便在更大的范围内建立计算机网络，国际标准化组织（ISO）在1978年提出了”开放系统互联参考模型”，即著名的OSI/RM模型（Open System Interconnection/Reference Model）。它将计算机网络体系结构的通信协议划分为七层，自下而上依次为：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。其中第四层完成数据传送服务，上面三层面向用户。OSI七层模型通过七个层次化的结构模型使不同的系统不同的网络之间实现可靠的通讯，因此其最主要的功能就是帮助不同类型的主机实现数据传输。</p>
<h2 id="TCP-IP协议"><a href="#TCP-IP协议" class="headerlink" title="TCP/IP协议"></a>TCP/IP协议</h2><p>OSI由于体系比较复杂，而且设计先于实现，有许多设计过于思想，不太方便计算机软件实现，因而完全实现OSI参考模型的系统不多，应用的范围有限。而TCP/IP协议最早在计算机系统中实现，在Linux、Windows平台中都有稳定的实现，并且提供了简单方便的编程接口（API），可以在其上开发出丰富的应用程序，因此得到了广泛的应用。TCP/IP协议已成为目前互联网事实上的国际标准和工业标准。</p>
<p>TCP/IP协议不仅仅指的是TCP和IP两个协议，而是指一个由FTP、SMTP、TCP、UDP、IP等协议构成的协议簇， 只是因为在TCP/IP协议中TCP协议和IP协议最具代表性，所以被称为TCP/IP协议。TCP/IP协议在一定程度上参考了OSI的体系结构。TCP/IP协议又可以分为四层和五层模型，其中和OSI七层模型的对应关系如下：</p>
<img src="/2020/12/21/network/TCPIP.jpg" style="zoom:67%;">

<p>五层模型只是OSI和TCP/IP的综合，实际应用还是TCP/IP的四层结构，使用更多的也还是四层模型。其中拿计算机A和计算机B进行通信举例，通过TCP/IP协议进行通信的模型图如下：</p>
<img src="/2020/12/21/network/example.png" style="zoom: 50%;">

<p>在数据传输的过程中，TCP/IP先自上而下，后自下而上处理数据头部：</p>
<img src="/2020/12/21/network/TCPIP2.png" style="zoom: 67%;">

<p>TCP/IP协议四层模型每层主要涉及的协议有：</p>
<img src="/2020/12/21/network/TCPIPModel.png" style="zoom: 50%;">



<h2 id="网络层次详解"><a href="#网络层次详解" class="headerlink" title="网络层次详解"></a>网络层次详解</h2><p>网络各个层次的主要功能与涉及的协议如下图所示：</p>
<img src="/2020/12/21/network/clipboard.png" style="zoom: 67%;">

<p>简而言之：</p>
<img src="/2020/12/21/network/osi.png" style="zoom: 50%;">

<h3 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h3><p>主要作用为建立、维护、断开不同设备之间的物理连接，进行原始比特流的传输（就是由1、0转化为电流强弱来进行传输，到达目的地后再转化为1、0，也就是我们通常所说的数模转换与模数转换）。主要协议有，RJ45、CLOCK、IEEE802.3（中继器、集线器）。</p>
<h4 id="信道"><a href="#信道" class="headerlink" title="信道"></a>信道</h4><p>信道是往一个方向传送信息的媒体。一条通信电路包含一个接收信道和发送信道。信道又分为单工通信信道（只能往一个方向通信，没有反方向反馈的信道，有线电视、无线电收音机等）、半双工通信信道（双方丢可以发送和接收信息，但不能双方同时发送，也不能同时接收）、全双工通信信道（双方丢可以同时发送和接收信息）。物理层数据是在通信信道上传播，为了提高信道利用率，采用了分用-复用技术，分用-复用技术主要分为频分复用、时分复用、波分复用、码分复用。</p>
<img src="/2020/12/21/network/xindao.png" style="zoom:50%;">

<h3 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h3><p>建立逻辑连接、进行硬件地址寻址、差错校验、透明传输等功能，用MAC地址访问介质。主要协议有，PPP、FR、HDLC、VLAN、MAC（网桥、交换机）。</p>
<h4 id="封装成帧"><a href="#封装成帧" class="headerlink" title="封装成帧"></a>封装成帧</h4><p>帧是数据链路层的传送单位，数据帧最大传输单元为MTU（Maximum Transmission Unit，一般最大1500字节）。发送端在网络层的一段数据前后添加特定标记形成“帧”（在数据前加帧首部，在数据后加帧尾部），接收端根据前后特定标记识别出“帧”。</p>
<img src="/2020/12/21/network/zhen.png" style="zoom:50%;">

<p>数据链路层转发数据帧的步骤如下，其中数据帧的前6个字节代表目的Mac地址：</p>
<img src="/2020/12/21/network/2road.png" style="zoom:50%;">

<h4 id="透明传输"><a href="#透明传输" class="headerlink" title="透明传输"></a>透明传输</h4><p>如果数据报中也有控制字符时，则需要使用转义字符ESC来实现透明传输，如图：</p>
<img src="/2020/12/21/network/esc.png" style="zoom:50%;">

<h4 id="差错检测"><a href="#差错检测" class="headerlink" title="差错检测"></a>差错检测</h4><p>数据链路层差错检测使用，奇偶校验码和循环冗余校验码CRC来实现，错误发现但不纠正。</p>
<p><strong>奇偶校验码</strong>：是一种通过增加1个冗余位使得码字中”1”的个数恒为奇数或偶数的编码方法，它是一种检错码。</p>
<img src="/2020/12/21/network/double.png" style="zoom:50%;">

<p><strong>循环冗余校验</strong>：一种根据传输或保存的数据而产生固定位数校验码的方法，生成的校验码会附加到数据后面。通过某种数学运算来建立数据位和校验位的约定关系的，奇偶校验码可以看为校验位为1的循环冗余校验码。循环冗余校验生成校验码运用了模“2”除法，简言之就是异或操作。循环冗余校验的步骤为：</p>
<ol>
<li><p>选定一个用于校验的多项式G(x)，并在数据尾部添加r个0，r为多项式最高阶，G(x)选取标准为：</p>
<img src="/2020/12/21/network/gx.jpg" style="zoom:50%;">

<p>G(x)转化为多项式的位串如下：</p>
<img src="/2020/12/21/network/gx2r.png" style="zoom:50%;">
</li>
<li><p>将添加r个0后的数据，使用模“2”除法除以多项式的位串</p>
</li>
<li><p>得到的余数填充在原始r个0的位置得到可校验的位串</p>
<img src="/2020/12/21/network/jiaoyan.png" style="zoom:50%;">
</li>
<li><p>接收端接收的数据除以G(x)的位串，根据余数判断出错，0没有错误</p>
<img src="/2020/12/21/network/jiaoyan4.png" style="zoom:50%;">

</li>
</ol>
<h3 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h3><p>进行逻辑地址寻址，实现不同网络之间的路径选择。Internet的发展使得从世界各站点访问信息的用户数大大增加，而网络层正是管理这种连接的层。主要协议有，IP、ICMP、ARP、RARP、OSPF、IPX、RIP、IGRP（交换机）。</p>
<h4 id="网络地址转换NAT技术"><a href="#网络地址转换NAT技术" class="headerlink" title="网络地址转换NAT技术"></a>网络地址转换NAT技术</h4><p>当在专用网内部的一些主机本来已经分配到了本地IP地址（即仅在本专用网内使用的专用地址），但现在又想和因特网上的主机通信（并不需要加密）时，可使用NAT方法。这种方法需要在专用网（私网IP）连接到因特网（公网IP）的路由器上安装NAT软件。装有NAT软件的路由器叫做NAT路由器，它至少有一个有效的外部全球IP地址（公网IP地址）。这样，所有使用本地地址（私网IP地址）的主机在和外界通信时，都要在NAT路由器上将其本地地址转换成全球IP地址，才能和因特网连接。</p>
<p>举例如下，出和入代表专有网络和公有网络互相访问的关系，通过NAT表会记录私有端口和公有端口的映射关系：</p>
<img src="/2020/12/21/network/NAT.png" style="zoom:50%;">

<h4 id="ARP协议和RARP协议"><a href="#ARP协议和RARP协议" class="headerlink" title="ARP协议和RARP协议"></a>ARP协议和RARP协议</h4><p>ARP协议（地址解析协议），主要是根据IP地址获取物理地址的一个TCP/IP协议。RARP协议（逆地址解析协议），顾名思义根据MAC地址获取IP地址。ARP协议和RARP协议是协调网络层和数据链路层配合工作的协议。</p>
<img src="/2020/12/21/network/arp.png" style="zoom: 67%;">

<img src="/2020/12/21/network/RARP.png" style="zoom: 67%;">

<p>主机发送信息时将包含目标IP地址的ARP请求广播到局域网络上的所有主机，并接收返回消息，以此确定目标的物理地址；收到返回消息后将该IP地址和物理地址存入<strong>本机ARP缓存</strong>中并保留一定时间，下次请求时直接查询ARP缓存以节约资源。ARP缓存是ARP协议和RARP协议运行的关键。ARP缓存表缓存了IP地址到硬件地址之间的映射关系（arp -a可查看本机ARP缓存）。ARP报文如下，注意ARP报文封装在数据帧中，但ARP还是属于网络层协议：</p>
<img src="/2020/12/21/network/arpmodel.png" style="zoom: 50%;">

<h4 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h4><p>设计IP的目的是提高网络的可扩展性：一是解决互联网问题，实现大规模、异构网络的互联互通；二是分割顶层网络应用和底层网络技术之间的耦合关系，以利于两者的独立发展。根据端到端的设计原则，IP只为主机提供一种无连接、不可靠的、尽力而为的数据包传输服务。通过IP协议使得复杂的实际网络变为一个虚拟互连的网络。IP协议使得网络层可以屏蔽底层细节而专注网络的数据转发。IP协议解决了在虚拟网络中数据报传输路径的问题。</p>
<h5 id="IP分组结构"><a href="#IP分组结构" class="headerlink" title="IP分组结构"></a>IP分组结构</h5><p>一个IP分组由首部和数据两部分组成。首部的前20字节是所有IP分组必须具有的，也称固定首部。在首部固定部分的后面是一些可选字段，其长度是可变的。</p>
<img src="/2020/12/21/network/iphead1.jpg" style="zoom: 50%;">

<p>IP首部：</p>
<img src="/2020/12/21/network/iphead.png" style="zoom: 50%;">

<ol>
<li>版本：占4位，指的是IP协议的版本，通信双方的版本必须一致，当前主流版本是4，即IPv4，也有IPv6</li>
<li>首部长度：占4位，再大数值为15，表示的是IP首部长度，单位是“32位字”，单位是即4个字节，也间接说明IP首部最大长度为15*4=60字节</li>
<li>总长度：占16位，最大数值是65535（单位字节），表示的是IP数据报总长度（IP首部+IP数据），需要说明的数据链路层MTU最大是1500字节。当IP数据报比MTU大时，则数据链路层则会把IP数据报分片</li>
<li>标志，标记IP数据报是否可以分片。片偏移，则表明在分片的情况下，是第几个个偏移</li>
<li>TTL：占8位，表明IP数据报文在网络中的寿命，每经过一个设备，TTL减1，当TTL=0时，网络设备必须丢弃该报文。TTL可以避免无限传输带来的带宽消耗</li>
<li>协议：占8位，表明IP数据锁携带的具体数据是什么协议的（如：TCP、UDP等）</li>
<li>首部校验和：占16位，校验IP首部是否出错</li>
</ol>
<h5 id="IP协议转发流程"><a href="#IP协议转发流程" class="headerlink" title="IP协议转发流程"></a>IP协议转发流程</h5><p>路由器仅根据网络地址进行转发，逐跳（hop-by-hop）在不同设备进行转发，最终到达目的地址。具体如下，当IP数据包经由路由器转发时，如果目标网络与本地路由器直接相连，则直接将数据包交付给目标主机，这称为直接交付；否则，路由器通过路由表查找路由信息，并将数据包转交给指明的下一跳路由器，这称为间接交付。路由器在间接交付中，若路由表中有到达目标网络的路由，则把数据包传送给路由表指明的下一跳路由器；如果没有路由，但路由表中有一个默认路由，则把数据包传送给指明的默认路由器；如果两者都没有，则丢弃数据包并报告错误。</p>
<p>举例来说，A到C的一个路由访问在网络层的步骤：</p>
<img src="/2020/12/21/network/roadmap.png" style="zoom:50%;">

<p>结合上面所讲的数据链路层和物理层，再还原下A到C的流程，注意数据帧每一跳的MAC地址都在变化，IP数据报每一跳的IP地址始终不变：</p>
<img src="/2020/12/21/network/roadmap1.png" style="zoom:50%;">

<img src="/2020/12/21/network/roadmap2.png" style="zoom:50%;">

<img src="/2020/12/21/network/roadmap3.png" style="zoom:50%;">

<h4 id="网络路由协议"><a href="#网络路由协议" class="headerlink" title="网络路由协议"></a>网络路由协议</h4><p>IP协议的转发流程有个重要的一点，路由表。路由表能够记录当前设备需要到目的地址，下一跳的地址。如下图所示：</p>
<img src="/2020/12/21/network/netroad1.png" style="zoom: 67%;">

<p>要解决网络路由问题，需要一个好的算法。路由算法实际上是图论算法，但是因为网络环境复杂，路由算法要比图论算法要复杂。涉及一个路由算法首先算法要是正确的、完整的，算法在计算上应该尽可能的简单，同时算法可以适应网络中的变化，并且算法是稳定的公平的。</p>
<p>因为互联网的规模是特别庞大的并且复杂的，在设计算法之前需要对互联网进行划分。这里我们引出了自治系统（AS）的概念，一个自治系统是处于一个管理机构下的网络设备群。AS内部网络自行管理，AS对外提供一个或者多个出（入）口。这样设计路由协议的时候可以分为两个层次：</p>
<ol>
<li>自治系统内部路由的协议：内部网关协议（RIP、OSPF）</li>
<li>自治系统外部路由协议：外部网关协议（BGP）</li>
</ol>
<p>如下图，则是不同AS之间运用内部与外部网关协议协作路由示意图：</p>
<img src="/2020/12/21/network/netroad2.png" style="zoom:67%;">

<h5 id="内部网关路由协议RIP"><a href="#内部网关路由协议RIP" class="headerlink" title="内部网关路由协议RIP"></a>内部网关路由协议RIP</h5><h6 id="距离矢量算法DV"><a href="#距离矢量算法DV" class="headerlink" title="距离矢量算法DV"></a>距离矢量算法DV</h6><p>所谓距离矢量即是将一条路由信息考虑成一个由目标和距离（用 Metric 来度量）组称的矢量，每一台路由器从其邻居处获得路由信息，并在每一条路由信息上叠加从自己到这个邻居的距离矢量，从而形成自己的路由信息。每一个节点使用两个向量Di和Si，Di描述的是当前节点到别的节点的距离。Si描述的是当前节点到别的节点的下一节点。每一个节点与相邻的节点交换向量Di和Si的信息，每一个节点根据交换的信息更新自己的节点信息。具体如下：</p>
<img src="/2020/12/21/network/DV.jpg" style="zoom:50%;">

<h6 id="RIP协议过程"><a href="#RIP协议过程" class="headerlink" title="RIP协议过程"></a>RIP协议过程</h6><p>RIP协议基于距离矢量算法，使用“跳数”(即metric)来衡量到达目标地址的路由距离。这种协议的路由器只关心自己周围的世界，只与自己相邻的路由器交换信息，范围限制在15跳(15度)之内，再远，它就不关心了，标记为不可达。RIP协议每隔30s会交换一次路由信息。主要过程如下：</p>
<ol>
<li>路由器初始化路由信息（两个向量Di和Si）</li>
<li>对相邻路由器X发送过来的信息，对信息内容进行修改（下一跳地址设置为X，所有距离加1）<ul>
<li>检索本地路由，将信息中新的路由插入到路由表里面</li>
<li>检索本地路由，对于下一跳为X的，更新为修改后的信息</li>
<li>检索本地路由，对比相同目的的距离，如果新信息的距离更小，则更新本地路由表</li>
</ul>
</li>
<li>如果3分钟没有收到相邻路由信息，则把相邻路由设置为不可达（16跳）</li>
</ol>
<h6 id="RIP协议的局限性"><a href="#RIP协议的局限性" class="headerlink" title="RIP协议的局限性"></a>RIP协议的局限性</h6><ol>
<li>协议中规定，一条有效的路由信息的度量（metric）不能超过15，这就使得该协议不能应用于很大型的网络，应该说正是由于设计者考虑到该协议只适合于小型网络所以才进行了这一限制。对于metric为16的目标网络来说，即认为其不可到达</li>
<li>该路由协议应用到实际中时，很容易出现“计数到无穷大”的现象，这使得路由收敛很慢，在网络拓扑结构变化以后需要很长时间路由信息才能稳定下来</li>
<li>该协议以跳数，即报文经过的路由器个数为衡量标准，并以此来选择路由，这一措施欠合理性，因为没有考虑网络延时、可靠性、线路负荷等因素对传输质量和速度的影响</li>
</ol>
<h5 id="内部网关路由协议OSPF"><a href="#内部网关路由协议OSPF" class="headerlink" title="内部网关路由协议OSPF"></a>内部网关路由协议OSPF</h5><h6 id="Dijkstra算法"><a href="#Dijkstra算法" class="headerlink" title="Dijkstra算法"></a>Dijkstra算法</h6><p>迪杰斯特拉算法(Dijkstra)是由荷兰计算机科学家狄克斯特拉于1959 年提出的，因此又叫狄克斯特拉算法。是从一个顶点到其余各顶点的最短路径算法，解决的是有权图中最短路径问题。迪杰斯特拉算法主要特点是从起始点开始，采用贪心算法的策略，每次遍历到始点距离最近且未访问过的顶点的邻接节点，直到扩展到终点为止。主要算法流程如下：</p>
<ol>
<li>初始化两个集合(S,U)（S为只有初始顶点A的集合，U为其他顶点集合）</li>
<li>如果U不为空，对U集合顶点进行距离的排序，并取出距离A最近的一个顶点D<ul>
<li>将顶点D纳入S集合</li>
<li>更新通过顶点D到达U集合所有点的距离（如果距离更小则更新顶点A到该点的距离，否则不更新）</li>
</ul>
</li>
<li>重复2的步骤直到U集合为空，算法完成</li>
</ol>
<h6 id="链路状态协议LS"><a href="#链路状态协议LS" class="headerlink" title="链路状态协议LS"></a>链路状态协议LS</h6><p>链路状态路由协议是层次式的，网络中的路由器并不向邻居传递“路由项”，而是通告给邻居一些链路状态（链路状态指距离、时延、带宽等）。与距离矢量路由协议相比，链路状态协议对路由的计算方法有本质的差别。距离矢量协议是平面式的，所有的路由学习完全依靠邻居，交换的是路由项。链路状态协议只是通告给邻居一些链路状态，<strong>并且只有链路状态发生变化时，才发送更新信息</strong>。运行该路由协议的路由器不是简单地从相邻的路由器学习路由，而是把路由器分成区域，收集区域的所有的路由器的链路状态信息，根据状态信息生成网络拓扑结构，每一个路由器再根据拓扑结构计算出路由。</p>
<h6 id="OSPF协议过程"><a href="#OSPF协议过程" class="headerlink" title="OSPF协议过程"></a>OSPF协议过程</h6><p>开放式最短路径优先（Open Shortest Path First，OSPF）是广泛使用的一种动态路由协议，它属于链路状态路由协议，具有路由变化收敛速度快、无路由环路、支持变长子网掩码（VLSM）和汇总、层次区域划分等优点。在网络中使用OSPF协议后，大部分路由将由OSPF协议自行计算和生成，无须网络管理员人工配置，当网络拓扑发生变化时，协议可以自动计算、更正路由，极大地方便了网络管理。OSPF协议的核心是Dijkstra算法。</p>
<p>OSPF协议依靠五种不同类型的分组来建立邻接关系和交换路由信息，即问候分组、数据库描述分组、链路状态请求分组、链路状态更新分组和链路状态确认分组。OSPF协议过程如下：</p>
<img src="/2020/12/21/network/LS.png" style="zoom:50%;">

<h5 id="RIP和OSPF协议对比"><a href="#RIP和OSPF协议对比" class="headerlink" title="RIP和OSPF协议对比"></a>RIP和OSPF协议对比</h5><table>
<thead>
<tr>
<th>RIP协议</th>
<th>OSPF协议</th>
</tr>
</thead>
<tbody><tr>
<td>从邻居看网络</td>
<td>整个网络拓扑</td>
</tr>
<tr>
<td>在路由器之间累加距离</td>
<td>Dijkstra算法计算最短路径</td>
</tr>
<tr>
<td>频繁、周期更新、收敛很慢</td>
<td>状态变化更新、收敛很快</td>
</tr>
<tr>
<td>路由间拷贝路由信息</td>
<td>路由间传递链路状态，自行计算路径</td>
</tr>
</tbody></table>
<h5 id="外部网关路由协议BGP"><a href="#外部网关路由协议BGP" class="headerlink" title="外部网关路由协议BGP"></a>外部网关路由协议BGP</h5><p>边际网关协议BGP，是自治系统（AS）间的路由协议，BGP交换的网络可达性信息提供了足够的信息来检测路由回路并根据性能优先和策略约束对路由进行决策。因为AS之间需要考虑除网络特性以外的一些因素（如政治、安全等），BGP协议只能够找到一条到达目的比较好的路由，AS之间通过BGP发言人来进行路由信息交换。BGP发言人可以人为配置策略。</p>
<h4 id="ICMP协议"><a href="#ICMP协议" class="headerlink" title="ICMP协议"></a>ICMP协议</h4><p>ICMP（Internet Control Message Protocol）Internet控制报文协议。ICMP协议是一种面向无连接的协议，用于传输出错报告控制信息。它是一个非常重要的协议，它对于网络安全具有极其重要的意义。它属于网络层协议，主要用于在主机与路由器之间传递控制信息，包括报告错误、交换受限控制和状态信息等。当遇到IP数据无法访问目标、IP路由器无法按当前的传输速率转发数据包等情况时，会自动发送ICMP消息。<strong>ping 和 tracert是两个常用网络管理命令</strong>，ping 用来测试网络可达性，tracert 用来显示到达目的主机的路径。ping和 tracert 都利用 ICMP 协议来实现网络功能，它们是把网络协议应用到日常网络管理的典型实例。</p>
<p>ICMP报文是存储在IP报文的数据区的：</p>
<img src="/2020/12/21/network/ICMP3.png" style="zoom:50%;">

<p>ICMP报文首部以及种类为：</p>
<img src="/2020/12/21/network/ICMP.png" style="zoom:50%;">

<img src="/2020/12/21/network/ICMP2.png" style="zoom:50%;">

<h3 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h3><p>定义传输数据的协议端口号，以及流控和差错校验。数据包一旦离开网卡即进入网络传输层。将从下层的接收的数据进行分段和传输，到达目的地后再进行传输。常常把这一层数据叫做段。主要协议有，TCP、UDP、SPX。</p>
<h4 id="UDP协议详解"><a href="#UDP协议详解" class="headerlink" title="UDP协议详解"></a>UDP协议详解</h4><p>UDP 是User Datagram Protocol的简称， 中文名是用户数据报协议，一种无连接的传输层协议，提供面向事务的简单不可靠信息传送服务。UDP有不提供数据包分组、组装和不能对数据包进行排序的缺点，也就是说，当报文发送之后，是无法得知其是否安全完整到达的。UDP数据报直接封装的是应用层数据，面向数据报文的协议结构如下：</p>
<img src="/2020/12/21/network/UDP.png" style="zoom:50%;">

<p>UDP报头由4个域组成，其中每个域各占用2个字节，具体包括源端口号、目标端口号、数据报长度、校验值。UDP报文没有可靠性保证、顺序保证和流量控制字段等，可靠性较差。但是正因为UDP协议的控制选项较少，在数据传输过程中延迟小、数据传输效率高，适合对可靠性要求不高的应用程序，或者可以保障可靠性的应用程序，如DNS、TFTP、SNMP等。首部结构图如下：</p>
<img src="/2020/12/21/network/UDPhead.png" style="zoom:50%;">

<h4 id="TCP详解"><a href="#TCP详解" class="headerlink" title="TCP详解"></a>TCP详解</h4><p>传输控制协议（TCP，Transmission Control Protocol）是一种面向连接的、可靠的、基于字节流的传输层通信协议，是为了在不可靠的互联网络上提供可靠的端到端字节流而专门设计的一个传输协议。其中一个TCP连接有两端（点对点通信），并且是全双工的通信。TCP的数据报如下：</p>
<img src="/2020/12/21/network/tcp.png" style="zoom:50%;">

<p>TCP首部结构设计如下：</p>
<img src="/2020/12/21/network/tcp4.png" style="zoom:50%;">

<p>其中：</p>
<ol>
<li><p>序号：占32位，一个字节一个序号，标记数据部分首字节的序号</p>
</li>
<li><p>确认号：占32位，同样也是一个字节一个序号，标记期望收到数据的首字节序号。确认号为N：则表示N-1序号的数据已经收到</p>
</li>
<li><p>数据偏移：占4位，单位为32位字，表示数据偏离首部的距离。主要因为TCP选项导致首部大小不可预知，所以设置该字段</p>
</li>
<li><p>TCP标记：占6位，每位各有不同的意义分别代表URG、ACK、PSH、RST、SYN、FIN</p>
<table>
<thead>
<tr>
<th>标记</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>URG</td>
<td>Urgent：紧急位，URG=1，表示紧急数据</td>
</tr>
<tr>
<td>ACK</td>
<td>Acknowledgement：确认位，ACK=1，确认号才生效</td>
</tr>
<tr>
<td>PSH</td>
<td>Push：推送位，PSH=1，尽快地把数据交付给应用层</td>
</tr>
<tr>
<td>RST</td>
<td>Rset：重置位，RST=1，重新建立连接</td>
</tr>
<tr>
<td>SYN</td>
<td>Synchronization：同步位，SYN=1表示连接请求报文</td>
</tr>
<tr>
<td>FIN</td>
<td>Finish：终止位，FIN=1表示释放连接</td>
</tr>
</tbody></table>
</li>
<li><p>窗口：占16位，窗口指明允许对方发送的数据量。窗口和确认号一起使用，则能够表明能够接受的数据范围</p>
</li>
<li><p>紧急指针：URG=1时，指定紧急数据在报文中的位置</p>
</li>
<li><p>TCP选项：最多40字节，支持未来的拓展用</p>
</li>
</ol>
<h5 id="TCP协议实现可靠传输"><a href="#TCP协议实现可靠传输" class="headerlink" title="TCP协议实现可靠传输"></a>TCP协议实现可靠传输</h5><h6 id="可靠传输"><a href="#可靠传输" class="headerlink" title="可靠传输"></a>可靠传输</h6><p>可靠传输，就是采用一系列技术来保障信息在发送方和接收方准确、精确的传输。有两种基本实现方式：</p>
<ol>
<li><p>停止等待协议：停止等待协议用于通信系统中，两个相连的设备相互发送信息时使用，以确保信息不因丢包或包乱序而丢失，是最简单的自动重传请求方法。停止等待协议传输消息，如下图所示，当然会出现三种异常情况，第一种发送消息在路上就消失了，第二种确认消息在路上丢失了，第三种确认消息很久才到。停止等待协议，每发送一个消息时，都需要设置一个定时器，面对上面提到的三种情况，都是通过超时重传来避免这类不可靠的场景。停止等待协议是最简单的可靠传输协议，但是停止等待协议对信道的利用率不是很高。</p>
<img src="/2020/12/21/network/TCP11.png" style="zoom:50%;">
</li>
<li><p>连续ARQ协议：连续ARQ（Automatic Repeat reQuest）协议指发送方维持着一个一定大小的发送窗口，位于发送窗口内的所有分组都可连续发送出去，而中途不需要等待对方的确认。这样信道的利用率就提高了。而发送方每收到一个确认就把发送窗口向前滑动一个分组的位置，如下图所示。</p>
<p>接收方一般都是采用积累确认的方式。这就是说，接收方不必对收到的分组逐个发送确认，而是在收到几个分组后，对按序到达的最后一个分组发送确认，这就表示：到这个分组为止的所有分组都已正确收到了。</p>
<p>积累确认有优点也有缺点。优点是：容易实现，即使确认丢失也不必重传。但缺点是不能向发送方反映出接收方已经正确收到的所有分组的信息。</p>
<img src="/2020/12/21/network/ARQ.png" style="zoom:50%;">

<h6 id="TCP可靠传输"><a href="#TCP可靠传输" class="headerlink" title="TCP可靠传输"></a>TCP可靠传输</h6><p>TCP的可靠传输基于连续ARQ协议来的，并通过选择重传来实现容错。TCP的滑动窗口以字节为单位，具体如下：</p>
<img src="/2020/12/21/network/TCPwindow.png" style="zoom:50%;">



</li>
</ol>
<p>   其中红色代表收到确认信息的字节，窗口会向后滑动两位，但是当出现如下情况时，则需要通过选择重传技术来实现可靠传输，选择重传需要重传的边界信息保存在TCP首部的TCP选项中。</p>
   <img src="/2020/12/21/network/TCPWindow2.png" style="zoom:50%;">

<h5 id="TCP流量控制"><a href="#TCP流量控制" class="headerlink" title="TCP流量控制"></a>TCP流量控制</h5><p>流量控制指让发送方发送速率不要太快。流量控制是使用窗口来实现的。</p>
<img src="/2020/12/21/network/TCPM.png" style="zoom:50%;">

<p>接收方此时可以通过调整窗口大小来实现进一步数据传输，但重置大小的消息并没有重传机制，如果消息丢失，则可能造成发送方一直认为窗口为0，接收方一直等待发送方传送数据的情况，这里通过坚持定时器来解决这个问题。当接收到窗口为0的消息，则启动坚持定时器。坚持定时器，每隔一段时间发送一个窗口探测报文，从而探测窗口的变化情况。</p>
<img src="/2020/12/21/network/TCPM2.png" style="zoom:50%;">

<h5 id="TCP拥塞控制"><a href="#TCP拥塞控制" class="headerlink" title="TCP拥塞控制"></a>TCP拥塞控制</h5><p>一条数据链路经过非常多的设备，数据链路中各个部分都有可能成为网络传输的瓶颈。流量控制考虑点对点的通信量控制，拥塞控制考虑整个网络，是全局性的考虑。一般报文超时，可以视为拥塞。</p>
<h6 id="拥塞控制的方法"><a href="#拥塞控制的方法" class="headerlink" title="拥塞控制的方法"></a>拥塞控制的方法</h6><ol>
<li>慢启动算法：由小到大慢慢增加发送数据量，没收到一个报文确认，就加一，数量级呈指数级增长，当达到慢启动阈值时则停止。</li>
<li>拥塞避免算法：维护一个拥塞窗口的变量，只要网络不拥塞，就试探着将拥塞窗口调大，每次加1</li>
</ol>
<p>采用拥塞控制方法的数据量增长示意图如下：</p>
<img src="/2020/12/21/network/TCPdu.png" style="zoom:50%;">

<h5 id="TCP三次握手"><a href="#TCP三次握手" class="headerlink" title="TCP三次握手"></a>TCP三次握手</h5><p>TCP三次握手流程如下：</p>
<ol>
<li>第一次握手：建立连接时，发送方发送SYN包（seq=x）到接收方，并进入SYN_SEND状态，等待接收方确认</li>
<li>第二次握手：接收方收到SYN包，必须确认客户SYN（ack=x+1），同时自己也发送一个SYN包（seq=y），即SYN+ACK包，此时接收方进入SYNC_RCVD状态</li>
<li>第三次握手：发送方收到接收方的SYN+ACK包，向接收方发送确认包ACK（ack=y+1）,此包发送完毕，发送方和接收方进入ESTABLISHED状态，完成三次握手</li>
</ol>
<img src="/2020/12/21/network/TCP3h.jpg" style="zoom:50%;">

<p>通过三次握手而不是两次握手可以避免已经失效的请求报文传送到对方，引起错误：</p>
<img src="/2020/12/21/network/TCP3error.png" style="zoom:50%;">

<h5 id="TCP四次挥手"><a href="#TCP四次挥手" class="headerlink" title="TCP四次挥手"></a>TCP四次挥手</h5><p>TCP四次挥手流程如下：</p>
<ol>
<li>第一次挥手：发送方发送一个FIN，用来关闭发送方到接收方的数据传输，发送方进入FIN-WAIT-1状态</li>
<li>第二次挥手：接收方收到FIN后，发送一个ACK给发送方，确认号为收到的序号+1，接受方进入CLOSE-WAIT状态</li>
<li>第三次挥手：接收方发送一个FIN，用来关闭接收端到发送方的数据传输，接收方进入LAST-ACK状态</li>
<li>第四次挥手：发送方收到FIN后，接收方进入TIME-WAIT状态，接着发送一个ACK给接收方，确认号为收到序号+1，接受方进入CLOSED状态，完成四次挥手</li>
</ol>
<img src="/2020/12/21/network/TCP4Bye.png" style="zoom:50%;">

<p>在发送方第四次挥手之后，<strong>TCP连接不会立即释放</strong>，发送方会进入TIME-WAIT状态。此时需要等待两个MSL（最长报文段寿命，建议2分钟）。主要有两个目的，一个是确保发送方ACK可以到达接收方，如果2MSL时间内没有收到，则接收方会重发，第二个是确保当前连接的所有报文都已经过期。</p>
<p>前面已经提到了<strong>超时定时器、坚持定时器、等待计时器</strong>，另外这里补充TCP的最后一个定时器，<strong>保活定时器</strong>。保活计时器，顾名思义，保活是这个计时器的主要目的，他是为了保活TCP连接而设计的，保活定时器可以防止TCP连接的两端出现长时期的空闲，当一方出现状态变化或故障时，另一方没有察觉的情况。服务端一般都会设置一个保活定时器，每次收到对方的数据则重置这个定时器，如果定时器超时，服务端则发送探测报文段，探测客户端是否还在线，如果没有收到响应的话，那么则认为客户端已经断开连接了，因此服务端也会终止这个连接。</p>
<h3 id="会话层"><a href="#会话层" class="headerlink" title="会话层"></a>会话层</h3><p>建立、管理、终止会话。建立在传输层之上，利用传输层提供的服务，使应用建立和维持会话，允许不同机器上的用户之间建立会话关系，并能使会话获得同步。主要协议有，NFS、SQL、NETBIOS、RPC。</p>
<h3 id="表示层"><a href="#表示层" class="headerlink" title="表示层"></a>表示层</h3><p>数据的表示、安全、压缩。表示层是处理所有与数据表示及运输有关的问题，包括转换、加密和压缩。每台计算机可能有它自己的表示数据的内部方法，例如，ASCII码与EBCDIC码，所以需要表示层协定来保证不同的计算机可以彼此理解。主要协议有，JPEG、MPEG、ASII。</p>
<h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3><p>是最靠近用户的OSI层。这一层为用户的应用程序（如：电子邮件、文件传输和仿真终端）提供网络服务。主要协议有，FTP、DNS、Telnet、SMTP、HTTP、WWW、NFS。</p>
<h4 id="DNS详解"><a href="#DNS详解" class="headerlink" title="DNS详解"></a>DNS详解</h4><p>域名系统（Domain Name System，缩写：DNS）是互联网的一项服务。它作为将域名和IP地址相互映射一个分布式数据库，能够使人更方便地访问互联网。DNS协议是用来将域名转换为IP地址（也可以将IP地址转换为相应的域名地址）。</p>
<h5 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h5><p>域名由点、字母和数字组成，点分割不同的域，域名可以分为顶级域（国家：cn、us等，通用：com、net、gov等）、二级域（aliyun、qq、baidu等）、三级域（mail、www、game等）。</p>
<h5 id="DNS解析顺序"><a href="#DNS解析顺序" class="headerlink" title="DNS解析顺序"></a>DNS解析顺序</h5><ol>
<li><strong>浏览器缓存</strong>：当用户通过浏览器访问某域名时，浏览器首先会在自己的缓存中查找是否有该域名对应的IP地址（若曾经访问过该域名且没有清空缓存便存在）</li>
<li><strong>系统缓存</strong>：当浏览器缓存中无域名对应IP则会自动检查用户计算机系统Hosts文件DNS缓存是否有该域名对应IP</li>
<li><strong>路由器缓存</strong>：当浏览器及系统缓存中均无域名对应IP则进入路由器缓存中检查，以上三步均为客服端的DNS缓存</li>
<li><strong>ISP（互联网服务提供商）DNS缓存</strong>：当在用户客服端查找不到域名对应IP地址，则将进入ISP DNS缓存中进行查询。比如你用的是电信的网络，则会进入电信的DNS缓存服务器中进行查找</li>
<li><strong>根域名服务器</strong>：当以上均未完成，则进入根服务器进行查询。全球仅有13台根域名服务器，1个主根域名服务器，其余12为辅根域名服务器。根域名收到请求后会查看区域文件记录，若无则将其管辖范围内顶级域名（如.com）服务器IP告诉本地DNS服务器</li>
<li><strong>顶级域名服务器</strong>：顶级域名服务器收到请求后查看区域文件记录，若无则将其管辖范围内主域名服务器的IP地址告诉本地DNS服务器</li>
<li><strong>主域名服务器</strong>：主域名服务器接受到请求后查询自己的缓存，如果没有则进入下一级域名服务器进行查找，并重复该步骤直至找到正确纪录</li>
<li><strong>保存结果至缓存</strong>：本地域名服务器把返回的结果保存到缓存，以备下一次使用，同时将该结果反馈给客户端，客户端通过这个IP地址与web服务器建立链接</li>
</ol>
<h4 id="DHCP协议详解"><a href="#DHCP协议详解" class="headerlink" title="DHCP协议详解"></a>DHCP协议详解</h4><p>DHCP（动态主机配置协议）是一个局域网的网络协议。指的是由服务器控制一段IP地址范围，客户机登录服务器时就可以自动获得服务器分配的IP地址和子网掩码。DHCP封包在传输层( Transport Layer）是采用UDP协议，而当 Client传送给封包给 Server时，采用的是UDP 68 Port，从 Server传送给 Client则是使用UDP 67 Port。</p>
<h4 id="HTTP协议详解"><a href="#HTTP协议详解" class="headerlink" title="HTTP协议详解"></a>HTTP协议详解</h4><p>超文本传输协议（Hypertext Transfer Protocol，HTTP）是一个简单的请求-响应协议，它通常运行在TCP之上，并且HTTP协议底层也是TCP协议实现，所以HTTP协议也是可靠的数据传输协议。HTTP是一种无状态协议，即服务器不保留与客户交易时的任何状态。客户与服务器之间的HTTP连接是一种一次性连接，它限制每次连接只处理一个请求，当服务器返回本次请求的应答后便立即关闭连接，下次请求再重新建立连接。HTTP是一种面向对象的协议。允许传送任意类型的数据对象。它通过数据类型和长度来标识所传送的数据内容和大小，并允许对数据进行压缩传送。当用户在一个HTML文档中定义了一个超文本链后，浏览器将通过TCP/IP协议与指定的服务器建立连接。</p>
<h5 id="HTTP请求报文和应答报文"><a href="#HTTP请求报文和应答报文" class="headerlink" title="HTTP请求报文和应答报文"></a>HTTP请求报文和应答报文</h5><p>HTTP规范定义了9种请求方法，每种请求方法规定了客户和服务器之间不同的信息交换方式，常用的请求方法是GET和POST。服务器将根据客户请求完成相应操作，并以应答块形式返回给客户，最后关闭连接。</p>
<p><strong>请求报文</strong></p>
<img src="network/httprequest.jpg">

<p>举例如下：</p>
<img src="network/httprequest1.png" style="zoom: 33%;">

<p><strong>应答报文</strong></p>
<img src="network/httpresponse.jpg">

<p>举例如下：</p>
<img src="network/httpresponse2.png" style="zoom:33%;">

<p><strong>状态码</strong></p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>1xx</td>
<td>信息类状态码，正在处理请求</td>
</tr>
<tr>
<td>2xx</td>
<td>成功状态码</td>
</tr>
<tr>
<td>3xx</td>
<td>重定向状态码</td>
</tr>
<tr>
<td>4xx</td>
<td>客户端错误状态码</td>
</tr>
<tr>
<td>5xx</td>
<td>服务端错误状态码</td>
</tr>
</tbody></table>
<h5 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h5><p>首先介绍下SSL和TSL，SSL(Secure Sockets Layer 安全套接字协议)，及其继任者传输层安全（Transport Layer Security，TLS）是<strong>为网络通信提供安全及数据完整性</strong>的一种安全协议。TLS与SSL在传输层与应用层之间对网络连接进行加密，采用身份验证和数据加密保证网络通信的安全和数据完整性。HTTPS协议则是通过SSL或者TLS实现的安全性。</p>
<ul>
<li>HTTPS协议需要到CA申请证书，一般免费证书很少，需要交费</li>
<li>HTTP协议运行在TCP之上，所有传输的内容都是明文，HTTPS运行在SSL/TLS之上，SSL/TLS运行在TCP之上，所有传输的内容都经过加密的</li>
<li>HTTP和HTTPS使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443</li>
<li>HTTPS可以有效的防止运营商劫持，解决了防劫持的一个大问题</li>
</ul>
<img src="/2020/12/21/network/HTTPS.png" style="zoom:50%;">

<p>HTTPS通过SSL或者TLS数据传输流程：</p>
<ol>
<li>浏览器将支持的加密算法信息发送给服务器</li>
<li>服务器选择一套浏览器支持的加密算法，以证书的形式回发浏览器</li>
<li>浏览器验证证书合法性，并结合证书公钥加密信息发送给服务器</li>
<li>服务器使用私钥解密信息，验证哈希，加密响应消息回发浏览器</li>
<li>浏览器解密响应消息，并对消息进行验真，之后进行加密交互数据</li>
</ol>
<p>SSL或者TLS首先通过非对称加密的方式来实现秘钥的协商， 再通过对称加密的方式来实现数据的加密。通过协议可以进行身份的验证，数据交互的时候，客户端和服务端都可以向CA机构申请证书，并且在协议握手阶段来验证彼此身份，防止第三方进行冒充。它可以保证信息的完整性，每次发送数据都会加上一个MAC摘要，并且签名。当发送数据和接收数据这个摘要信息一致的话，就表示这个信息是没有被第三方篡改过的。</p>
<h5 id="HTTP协议的发展"><a href="#HTTP协议的发展" class="headerlink" title="HTTP协议的发展"></a>HTTP协议的发展</h5><h6 id="影响HTTP的主要因素"><a href="#影响HTTP的主要因素" class="headerlink" title="影响HTTP的主要因素"></a>影响HTTP的主要因素</h6><p>影响一个 HTTP 网络请求的因素主要有两个：</p>
<ul>
<li><p><strong>带宽：</strong>如果说我们还停留在拨号上网的阶段，带宽可能会成为一个比较严重影响请求的问题，但是现在网络基础建设已经使得带宽得到极大的提升，我们不再会担心由带宽而影响网速，那么就只剩下延迟了</p>
</li>
<li><p><strong>延迟：</strong></p>
</li>
<li><ul>
<li>浏览器阻塞（HOL blocking）：浏览器会因为一些原因阻塞请求。浏览器对于同一个域名，同时只能有 4 个连接（这个根据浏览器内核不同可能会有所差异），超过浏览器最大连接数限制，后续请求就会被阻塞</li>
<li>DNS 查询（DNS Lookup）：浏览器需要知道目标服务器的 IP 才能建立连接。将域名解析为 IP 的这个系统就是 DNS。这个通常可以利用DNS缓存结果来达到减少这个时间的目的</li>
<li>建立连接（Initial connection）：HTTP 是基于 TCP 协议的，浏览器最快也要在第三次握手时才能捎带 HTTP 请求报文，达到真正的建立连接，但是这些连接无法复用会导致每次请求都经历三次握手和慢启动。三次握手在高延迟的场景下影响较明显，慢启动则对文件类大请求影响较大</li>
</ul>
</li>
</ul>
<h6 id="HTTP1-1"><a href="#HTTP1-1" class="headerlink" title="HTTP1.1"></a>HTTP1.1</h6><ol>
<li><strong>长连接</strong>：在HTTP / 0.9和1.0中，连接在单个请求/响应对之后关闭。HTTP 1.1支持长连接（PersistentConnection）和请求的流水线（Pipelining）处理，在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟，在HTTP1.1中默认开启Connection： keep-alive，一定程度上弥补了HTTP1.0每次请求都要创建连接的缺点。这样的持久性连接可以明显减少请求延迟，因为在发送第一个请求之后，客户端不需要重新协商TCP3次握手连接。另一个积极的副作用是，通常，由于TCP的缓慢启动机制，连接随着时间的推移而变得更快</li>
<li><strong>带宽优化及网络连接的使用</strong>：协议的1.1版还对HTTP / 1.0进行了带宽优化改进。例如，HTTP / 1.1引入了分块传输编码，以允许流传输而不是缓冲持久连接上的内容。HTTP流水线进一步减少了延迟时间，允许客户端在等待每个响应之前发送多个请求。协议的另一项附加功能是字节服务，即服务器仅传输客户端明确请求的资源部分</li>
<li><strong>错误通知的管理</strong>：在HTTP1.1中新增了24个错误状态响应码，如409（Conflict）表示请求的资源与资源的当前状态发生冲突；410（Gone）表示服务器上的某个资源被永久性的删除</li>
<li><strong>缓存处理</strong>：在HTTP1.0中主要使用header里的If-Modified-Since,Expires来做为缓存判断的标准，HTTP1.1则引入了更多的缓存控制策略例如Entity tag，If-Unmodified-Since, If-Match, If-None-Match等更多可供选择的缓存头来控制缓存策略</li>
<li><strong>Host头处理</strong>：在HTTP1.0中认为每台服务器都绑定一个唯一的IP地址，因此，请求消息中的URL并没有传递主机名（hostname）。但随着虚拟主机技术的发展，在一台物理服务器上可以存在多个虚拟主机（Multi-homed Web Servers），并且它们共享一个IP地址。HTTP1.1的请求消息和响应消息都应支持Host头域，且请求消息中如果没有Host头域会报告一个错误（400 Bad Request）</li>
</ol>
<h6 id="HTTP2-0"><a href="#HTTP2-0" class="headerlink" title="HTTP2.0"></a>HTTP2.0</h6><p>HTTP2.0主要基于SPDY协议。SPDY是Speedy的昵音，意为“更快”。它是Google开发的基于TCP协议的应用层协议。目标是优化HTTP协议的性能，通过压缩、多路复用和优先级等技术，缩短网页的加载时间并提高安全性。SPDY协议的核心思想是尽量减少TCP连接数。SPDY并不是一种用于替代HTTP的协议，而是对HTTP协议的增强。</p>
<img src="/2020/12/21/network/spdy.png" style="zoom: 67%;">

<p>HTTP1.x有以下几个主要缺点：</p>
<ol>
<li>HTTP/1.0一次只允许在一个TCP连接上发起一个请求，HTTP/1.1使用的流水线技术也只能部分处理请求并发，仍然会存在队列头阻塞问题，因此客户端在需要发起多次请求时，通常会采用建立多连接来减少延迟。</li>
<li>单向请求，只能由客户端发起。</li>
<li>请求报文与响应报文首部信息冗余量大。</li>
<li>数据未压缩，导致数据的传输量大</li>
</ol>
<p>通过SPDY的方案，优化了HTTP1.X的请求延迟，解决了HTTP1.X的安全性，具体如下：</p>
<ol>
<li><strong>降低延迟</strong>：针对HTTP高延迟的问题，SPDY优雅的采取了多路复用（multiplexing）。多路复用通过多个请求stream共享一个tcp连接的方式，解决了HOL blocking的问题，降低了延迟同时提高了带宽的利用率</li>
<li><strong>请求优先级</strong>（request prioritization）：多路复用带来一个新的问题是，在连接共享的基础之上有可能会导致关键请求被阻塞。SPDY允许给每个request设置优先级，这样重要的请求就会优先得到响应。比如浏览器加载首页，首页的html内容应该优先展示，之后才是各种静态资源文件，脚本文件等加载，这样可以保证用户能第一时间看到网页内容</li>
<li><strong>header压缩</strong>：前面提到HTTP1.x的header很多时候都是重复多余的。选择合适的压缩算法可以减小包的大小和数量。</li>
<li><strong>基于HTTPS的加密协议传输</strong>：大大提高了传输数据的可靠性</li>
<li><strong>服务端推送</strong>（server push）：采用了SPDY的网页，例如我的网页有一个sytle.css的请求，在客户端收到sytle.css数据的同时，服务端会将sytle.js的文件推送给客户端，当客户端再次尝试获取sytle.js时就可以直接从缓存中获取到，不用再发请求了</li>
</ol>
<p>HTTP2.0可以说是SPDY的升级版（其实原本也是基于SPDY设计的），但是HTTP2.0 跟 SPDY 仍有不同的地方，HTTP2.0 支持明文 HTTP 传输，而 SPDY 强制使用 HTTPS，还有就是消息头的压缩算法不同。</p>
<p><strong>HTTP2.0和HTTP1.X相比的新特性</strong></p>
<ul>
<li><strong>新的二进制格式</strong>（Binary Format），HTTP1.x的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认0和1的组合。基于这种考虑HTTP2.0的协议解析决定采用二进制格式，实现方便且健壮</li>
<li><strong>多路复用</strong>（MultiPlexing），即连接共享，即每一个request都是是用作连接共享机制的。一个request对应一个id，这样一个连接上可以有多个request，每个连接的request可以随机的混杂在一起，接收方可以根据request的 id将request再归属到各自不同的服务端请求里面</li>
<li><strong>header压缩</strong>，如上文中所言，对前面提到过HTTP1.x的header带有大量信息，而且每次都要重复发送，HTTP2.0使用encoder来减少需要传输的header大小，通讯双方各自cache一份header fields表，既避免了重复header的传输，又减小了需要传输的大小</li>
<li><strong>服务端推送</strong>（server push），同SPDY一样，HTTP2.0也具有server push功能</li>
</ul>
<p><strong>HTTP2.0的多路复用和HTTP1.X中的长连接复用有什么区别</strong></p>
<ul>
<li>HTTP/1.0：一次请求-响应，建立一个连接，用完关闭；每一个请求都要建立一个连接</li>
<li>HTTP/1.1：Pipeling解决方式为，若干个请求排队串行化单线程处理，后面的请求等待前面请求的返回才能获得执行机会，一旦有某请求超时等，后续请求只能被阻塞，毫无办法，也就是人们常说的线头阻塞</li>
<li>HTTP/2：多个请求可同时在一个连接上并行执行。某个请求任务耗时严重，不会影响到其它连接的正常执行</li>
</ul>
<p>HTTP 性能优化的关键并不在于高带宽，而是低延迟。TCP 连接会随着时间进行自我调整，起初会限制连接的最大速度，如果数据成功传输，会随着时间的推移提高传输的速度。这种调整则被称为 TCP 慢启动。由于这种原因，让原本就具有突发性和短时性的 HTTP 连接变的十分低效。HTTP/2 通过让所有数据流共用同一个连接，可以更有效地使用 TCP 连接，让高带宽也能真正的服务于 HTTP 的性能提升。</p>
<p>- </p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag"># 网络</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/12/18/mysql/" rel="prev" title="数据库基础">
      <i class="fa fa-chevron-left"></i> 数据库基础
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/04/io/" rel="next" title="Java IO">
      Java IO <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="nav-number">2.</span> <span class="nav-text">计算机网络的性能指标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%AC%A1%E5%88%92%E5%88%86"><span class="nav-number">3.</span> <span class="nav-text">网络层次划分</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#OSI%E5%BC%80%E6%94%BE%E5%BC%8F%E4%BA%92%E8%81%94%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.1.</span> <span class="nav-text">OSI开放式互联参考模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCP-IP%E5%8D%8F%E8%AE%AE"><span class="nav-number">3.2.</span> <span class="nav-text">TCP&#x2F;IP协议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%AC%A1%E8%AF%A6%E8%A7%A3"><span class="nav-number">3.3.</span> <span class="nav-text">网络层次详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="nav-number">3.3.1.</span> <span class="nav-text">物理层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%A1%E9%81%93"><span class="nav-number">3.3.1.1.</span> <span class="nav-text">信道</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="nav-number">3.3.2.</span> <span class="nav-text">数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7"><span class="nav-number">3.3.2.1.</span> <span class="nav-text">封装成帧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="nav-number">3.3.2.2.</span> <span class="nav-text">透明传输</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B"><span class="nav-number">3.3.2.3.</span> <span class="nav-text">差错检测</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="nav-number">3.3.3.</span> <span class="nav-text">网络层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT%E6%8A%80%E6%9C%AF"><span class="nav-number">3.3.3.1.</span> <span class="nav-text">网络地址转换NAT技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ARP%E5%8D%8F%E8%AE%AE%E5%92%8CRARP%E5%8D%8F%E8%AE%AE"><span class="nav-number">3.3.3.2.</span> <span class="nav-text">ARP协议和RARP协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP%E5%8D%8F%E8%AE%AE"><span class="nav-number">3.3.3.3.</span> <span class="nav-text">IP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#IP%E5%88%86%E7%BB%84%E7%BB%93%E6%9E%84"><span class="nav-number">3.3.3.3.1.</span> <span class="nav-text">IP分组结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#IP%E5%8D%8F%E8%AE%AE%E8%BD%AC%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="nav-number">3.3.3.3.2.</span> <span class="nav-text">IP协议转发流程</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="nav-number">3.3.3.4.</span> <span class="nav-text">网络路由协议</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AERIP"><span class="nav-number">3.3.3.4.1.</span> <span class="nav-text">内部网关路由协议RIP</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%B7%9D%E7%A6%BB%E7%9F%A2%E9%87%8F%E7%AE%97%E6%B3%95DV"><span class="nav-number">3.3.3.4.1.1.</span> <span class="nav-text">距离矢量算法DV</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#RIP%E5%8D%8F%E8%AE%AE%E8%BF%87%E7%A8%8B"><span class="nav-number">3.3.3.4.1.2.</span> <span class="nav-text">RIP协议过程</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#RIP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7"><span class="nav-number">3.3.3.4.1.3.</span> <span class="nav-text">RIP协议的局限性</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AEOSPF"><span class="nav-number">3.3.3.4.2.</span> <span class="nav-text">内部网关路由协议OSPF</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Dijkstra%E7%AE%97%E6%B3%95"><span class="nav-number">3.3.3.4.2.1.</span> <span class="nav-text">Dijkstra算法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E5%8D%8F%E8%AE%AELS"><span class="nav-number">3.3.3.4.2.2.</span> <span class="nav-text">链路状态协议LS</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#OSPF%E5%8D%8F%E8%AE%AE%E8%BF%87%E7%A8%8B"><span class="nav-number">3.3.3.4.2.3.</span> <span class="nav-text">OSPF协议过程</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#RIP%E5%92%8COSPF%E5%8D%8F%E8%AE%AE%E5%AF%B9%E6%AF%94"><span class="nav-number">3.3.3.4.3.</span> <span class="nav-text">RIP和OSPF协议对比</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AEBGP"><span class="nav-number">3.3.3.4.4.</span> <span class="nav-text">外部网关路由协议BGP</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ICMP%E5%8D%8F%E8%AE%AE"><span class="nav-number">3.3.3.5.</span> <span class="nav-text">ICMP协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="nav-number">3.3.4.</span> <span class="nav-text">传输层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#UDP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3"><span class="nav-number">3.3.4.1.</span> <span class="nav-text">UDP协议详解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%E8%AF%A6%E8%A7%A3"><span class="nav-number">3.3.4.2.</span> <span class="nav-text">TCP详解</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#TCP%E5%8D%8F%E8%AE%AE%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="nav-number">3.3.4.2.1.</span> <span class="nav-text">TCP协议实现可靠传输</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="nav-number">3.3.4.2.1.1.</span> <span class="nav-text">可靠传输</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#TCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="nav-number">3.3.4.2.1.2.</span> <span class="nav-text">TCP可靠传输</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="nav-number">3.3.4.2.2.</span> <span class="nav-text">TCP流量控制</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="nav-number">3.3.4.2.3.</span> <span class="nav-text">TCP拥塞控制</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">3.3.4.2.3.1.</span> <span class="nav-text">拥塞控制的方法</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="nav-number">3.3.4.2.4.</span> <span class="nav-text">TCP三次握手</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#TCP%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="nav-number">3.3.4.2.5.</span> <span class="nav-text">TCP四次挥手</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E5%B1%82"><span class="nav-number">3.3.5.</span> <span class="nav-text">会话层</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E7%A4%BA%E5%B1%82"><span class="nav-number">3.3.6.</span> <span class="nav-text">表示层</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="nav-number">3.3.7.</span> <span class="nav-text">应用层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS%E8%AF%A6%E8%A7%A3"><span class="nav-number">3.3.7.1.</span> <span class="nav-text">DNS详解</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D"><span class="nav-number">3.3.7.1.1.</span> <span class="nav-text">域名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DNS%E8%A7%A3%E6%9E%90%E9%A1%BA%E5%BA%8F"><span class="nav-number">3.3.7.1.2.</span> <span class="nav-text">DNS解析顺序</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DHCP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3"><span class="nav-number">3.3.7.2.</span> <span class="nav-text">DHCP协议详解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3"><span class="nav-number">3.3.7.3.</span> <span class="nav-text">HTTP协议详解</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E5%92%8C%E5%BA%94%E7%AD%94%E6%8A%A5%E6%96%87"><span class="nav-number">3.3.7.3.1.</span> <span class="nav-text">HTTP请求报文和应答报文</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTPS"><span class="nav-number">3.3.7.3.2.</span> <span class="nav-text">HTTPS</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HTTP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%8F%91%E5%B1%95"><span class="nav-number">3.3.7.3.3.</span> <span class="nav-text">HTTP协议的发展</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%BD%B1%E5%93%8DHTTP%E7%9A%84%E4%B8%BB%E8%A6%81%E5%9B%A0%E7%B4%A0"><span class="nav-number">3.3.7.3.3.1.</span> <span class="nav-text">影响HTTP的主要因素</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#HTTP1-1"><span class="nav-number">3.3.7.3.3.2.</span> <span class="nav-text">HTTP1.1</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#HTTP2-0"><span class="nav-number">3.3.7.3.3.3.</span> <span class="nav-text">HTTP2.0</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">EvenLjj</p>
  <div class="site-description" itemprop="description">记录最近所学所思，让岁月留下汗水的痕迹</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">17</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">EvenLjj</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
